<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>İsme Özel Doğum Günü Şarkıları</title>

  <!-- META / SEO -->
  <meta name="description" content="İsmini yaz, doğum günü şarkını bul! Tek tıkla YouTube videosunu aç ve WhatsApp, Instagram, Facebook’ta paylaş.">
  <link rel="canonical" href="https://herisimdesarki.github.io/isme-ozel-dogumgunu-sarkilari/">
  <meta property="og:title" content="İsme Özel Doğum Günü Şarkıları">
  <meta property="og:description" content="İsmini yaz → videonu aç → tek tıkla paylaş 🎉">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://herisimdesarki.github.io/isme-ozel-dogumgunu-sarkilari/">
  <meta property="og:image" content="https://herisimdesarki.github.io/isme-ozel-dogumgunu-sarkilari/og-cover.jpg">
  <meta name="theme-color" content="#0b1220">

  <style>
    :root{
      --bg:#0b1220;
      --card:#121a2b;
      --muted:#9fb3c8;
      --text:#e9f0ff;
      --brand:#7bdcff;
      --accent:#ffb86b;
      --ring:rgba(123,220,255,.35);
      --shadow:0 8px 24px rgba(0,0,0,.35);
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 80% -200px, #233150 0%, transparent 60%),
        radial-gradient(900px 600px at -200px 120%, #1a2a45 0%, transparent 60%),
        var(--bg);
    }

    .container{
      width:100%;
      max-width:900px;
      margin:0 auto;
      padding:12px;
    }

    header{
      text-align:center;
      padding:18px 8px 6px;
    }
    h1{
      margin:0 0 6px;
      font-size:clamp(22px, 5vw, 40px);
      letter-spacing:.3px;
    }
    .sub{
      margin:4px 0 14px;
      color:var(--muted);
      font-size:clamp(14px, 3.5vw, 18px);
    }

    .search{
      display:block;
      width:100%;
      box-sizing:border-box;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      color:var(--text);
      padding:14px 16px;
      border-radius:14px;
      outline:none;
      font-size:16px;
      transition:.2s border, .2s box-shadow, .2s background;
      backdrop-filter: blur(6px);
    }
    .search:focus{
      border-color:var(--ring);
      box-shadow:0 0 0 6px var(--ring);
      background:rgba(255,255,255,.07);
    }

    /* grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(2, 1fr);
      gap:12px;
      margin-top:14px;
    }
    @media (max-width:620px){
      .grid{ grid-template-columns:1fr; }
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08);
      border-radius:16px;
      padding:16px;
      box-shadow:var(--shadow);
      transition:.18s transform,.18s border,.18s background;
      cursor:pointer;
    }
    .card:hover{ transform:translateY(-2px); border-color:rgba(123,220,255,.35) }
    .card h3{
      margin:0 0 6px;
      font-weight:700;
      font-size:18px;
      color:#cfe5ff;
      text-decoration:underline;
      text-underline-offset:3px;
    }
    .card p{
      margin:0;
      color:var(--muted);
      font-size:14px;
    }

    /* Share row (above video) */
    .share-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      margin:14px 0 8px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border-radius:12px;
      padding:10px 14px;
      font-weight:600;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.06);
      box-shadow:var(--shadow);
      cursor:pointer;
      text-decoration:none;
      color:var(--text);
      transition:.18s transform,.18s border,.18s background;
    }
    .chip:hover{ transform:translateY(-1px); border-color:var(--ring) }
    .chip .ico{ font-size:18px; }

    .video-wrap{
      position:relative;
      margin-top:12px;
      aspect-ratio:16/9;
      border-radius:12px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:var(--shadow);
      max-width:100%;
      background:#000;
    }
    .video-wrap iframe{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
    }

    .muted{ color:var(--muted); font-size:14px; margin:8px 2px 0; }

    footer{
      text-align:center;
      color:var(--muted);
      font-size:13px;
      padding:28px 8px 32px;
    }
    a{ color:#9cc7ff; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>🎂 İsme Özel Doğum Günü Şarkıları</h1>
      <div class="sub">İsmini yaz → videoyu aç → tek tıkla paylaş 🎉</div>
      <input id="search" class="search" type="text" placeholder="İsmini yaz (ör. Ahmet, Zeynep…)" autocomplete="off" />
    </header>

    <section id="results" class="grid" aria-live="polite"></section>

    <!-- Share + Video -->
    <div id="shareBlock" style="display:none">
      <div class="share-row" id="shareRow">
        <!-- butonlar JS ile dolduruluyor -->
      </div>

      <div class="video-wrap" id="videoWrap">
        <!-- iframe burada -->
      </div>

      <p class="muted" id="nowPlaying"></p>
    </div>

    <footer>© <span id="y"></span> İsme Özel Şarkılar — <a href="#">geri bildirim</a></footer>
  </div>

  <!-- Fuse.js -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script>
    const els = {
      search: document.getElementById('search'),
      results: document.getElementById('results'),
      shareBlock: document.getElementById('shareBlock'),
      shareRow: document.getElementById('shareRow'),
      videoWrap: document.getElementById('videoWrap'),
      nowPlaying: document.getElementById('nowPlaying'),
    };
    document.getElementById('y').textContent = new Date().getFullYear();

    let data = [];
    let fuse;

    // isim → YouTube embed URL
    function toEmbed(u){
      if(!u) return '';
      const clean = u.trim().replace(/\s+$/,'');
      // shorts
      if(/youtube\.com\/shorts\//i.test(clean)){
        const id = clean.split('/shorts/')[1].split(/[?&]/)[0];
        return `https://www.youtube.com/embed/${id}`;
      }
      // youtu.be
      if(/youtu\.be\//i.test(clean)){
        const id = clean.split('youtu.be/')[1].split(/[?&]/)[0];
        return `https://www.youtube.com/embed/${id}`;
      }
      // watch?v=
      if(/watch\?v=/i.test(clean)){
        const id = new URL(clean).searchParams.get('v');
        return `https://www.youtube.com/embed/${id}`;
      }
      // son çare: direkt embed'e bırak
      return clean.replace('watch?v=','embed/');
    }

    // Share linkleri üret
    function buildShareButtons(name, url){
      const page = location.origin + location.pathname + '#'+ encodeURIComponent(name);
      const text = `${name} için doğum günü şarkısı 🎂`;
      const wa = `https://wa.me/?text=${encodeURIComponent(text+' '+page)}`;
      const fb = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(page)}`;
      const tw = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(page)}`;
      // Instagram’ın resmi web-share’i yok; kullanıcıya linki kopyalatıyoruz
      const copy = () => {
        navigator.clipboard.writeText(page).then(()=> toast('Bağlantı kopyalandı 📋'));
      };

      const row = els.shareRow;
      row.innerHTML = '';

      // Web Share API (varsa tek buton)
      if(navigator.share){
        const btn = chip('📤', 'Paylaş', async ()=>{
          try{
            await navigator.share({ title: document.title, text, url: page });
          }catch(e){}
        });
        row.appendChild(btn);
      }

      row.appendChild( linkChip('🟢','WhatsApp', wa) );
      row.appendChild( linkChip('📘','Facebook', fb) );
      row.appendChild( linkChip('𝕏','X (Twitter)', tw) );
      row.appendChild( chip('📎','Kopyala', copy) );

      // Instagram bilgi
      const igHint = document.createElement('span');
      igHint.className = 'muted';
      igHint.textContent = 'Instagram’da paylaşmak için bağlantıyı kopyalayıp hikâye/DM’ye yapıştır.';
      row.appendChild(igHint);
    }

    function chip(emoji, label, onclick){
      const a = document.createElement('button');
      a.type = 'button';
      a.className = 'chip';
      a.innerHTML = `<span class="ico">${emoji}</span>${label}`;
      a.onclick = onclick;
      return a;
    }
    function linkChip(emoji, label, href){
      const a = document.createElement('a');
      a.className = 'chip';
      a.href = href;
      a.target = '_blank';
      a.rel = 'noopener';
      a.innerHTML = `<span class="ico">${emoji}</span>${label}`;
      return a;
    }

    function toast(msg){
      // basit, yerel bir toast
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.position='fixed';
      t.style.left='50%';
      t.style.bottom='22px';
      t.style.transform='translateX(-50%)';
      t.style.background='rgba(0,0,0,.7)';
      t.style.color='#fff';
      t.style.padding='10px 14px';
      t.style.borderRadius='10px';
      t.style.fontSize='14px';
      t.style.zIndex='9999';
      document.body.appendChild(t);
      setTimeout(()=> t.remove(), 1500);
    }

    // Kartları çiz
    function render(list){
      els.results.innerHTML = '';
      if(!list.length){
        const d = document.createElement('div');
        d.className='muted';
        d.textContent = 'Sonuç yok.';
        els.results.appendChild(d);
        return;
      }
      list.forEach(item=>{
        const card = document.createElement('div');
        card.className='card';
        card.innerHTML = `<h3>${item.name}</h3><p>YouTube’a git</p>`;
        card.onclick = ()=> play(item);
        els.results.appendChild(card);
      });
    }

    // Oynat + share + scroll
    function play(item){
      const url = (item.youtube || item.youtube_url || '').trim();
      const embed = toEmbed(url);
      if(!embed){ toast('Video bağlantısı bulunamadı'); return; }

      els.shareBlock.style.display='block';
      els.videoWrap.innerHTML = `<iframe src="${embed}" title="${item.name}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
      els.nowPlaying.textContent = `🎵 Şu an oynatılıyor: ${item.name}`;
      buildShareButtons(item.name, url);

      // yumuşak scroll (mobilde görünür olsun)
      setTimeout(()=>{
        els.videoWrap.scrollIntoView({ behavior:'smooth', block:'start' });
      }, 50);

      // URL hash’e isim yaz (derin link)
      history.replaceState(null,'', '#'+encodeURIComponent(item.name));
    }

    // Arama
    let tId;
    els.search.addEventListener('input', e=>{
      const q = e.target.value.trim();
      clearTimeout(tId);
      tId = setTimeout(()=>{
        if(!q){ render([]); return; }
        const res = fuse.search(q, { limit: 20 }).map(r=>r.item);
        render(res);
      }, 120);
    });

    // Enter ile en iyi eşleşmeyi aç
    els.search.addEventListener('keydown', e=>{
      if(e.key==='Enter'){
        const q = els.search.value.trim();
        if(!q) return;
        const best = fuse.search(q, { limit: 1 });
        if(best.length) play(best[0].item);
      }
    });

    // JSON yükle (names.json → isimler.json fallback)
    async function loadData(){
      let json;
      try{
        const r1 = await fetch('names.json', { cache:'no-store' });
        if(r1.ok) json = await r1.json();
      }catch(e){}
      if(!json){
        try{
          const r2 = await fetch('isimler.json', { cache:'no-store' });
          if(r2.ok) json = await r2.json();
        }catch(e){}
      }
      if(!Array.isArray(json)) json = [];

      // field normalizasyonu
      data = json.map(x=>({
        name: x.name?.toString().trim() ?? '',
        youtube: (x.youtube ?? x.youtube_url ?? '').toString().trim()
      })).filter(x=>x.name && x.youtube);

      fuse = new Fuse(data, {
        keys:['name'],
        threshold:0.3,
        ignoreLocation:true,
        isCaseSensitive:false,
        distance:100
      });

      // hash ile derin link
      const hashName = decodeURIComponent(location.hash.replace('#','')).trim();
      if(hashName){
        els.search.value = hashName;
        const best = fuse.search(hashName, { limit: 1 });
        if(best.length) play(best[0].item);
      }
    }

    loadData();
  </script>
</body>
</html>
